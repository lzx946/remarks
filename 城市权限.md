### 建表

```sql
CREATE TABLE `open_city` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `city_code` varchar(10) NOT NULL COMMENT '城市Code',
  `city_name` varchar(50) NOT NULL COMMENT '城市名',
  `province` varchar(50) NOT NULL DEFAULT '' COMMENT '省份',
  `status` varchar(2) NOT NULL DEFAULT '1' COMMENT '状态0=禁用，1=正常',
  `del_flag` varchar(2) DEFAULT '1' COMMENT '逻辑删除，至0',
  `create_id` varchar(20) DEFAULT NULL COMMENT '创建人',
  `create_date` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  `modify_id` varchar(20) DEFAULT NULL COMMENT '修改人',
  `modify_date` timestamp NULL DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP COMMENT '修改时间',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='开放城市';
```

### 添加字段

- 商户表添加区域code并更新

```sql
ALTER TABLE 96365_mall.merchant ADD COLUMN district_code varchar(10) NOT NULL DEFAULT '' COMMENT '区县code' AFTER city_code;

UPDATE 96365_mall.merchant m 
LEFT JOIN 96365_mall.region r ON m.DISTRICT LIKE CONCAT('%',r.SHORT_NAME,'%') 
SET m.district_code = r.ID;
```

- 添加权限

```sql
INSERT INTO 96365_user.function_info (FUNCTION_ID,FUNCTION_NAME,TYPE,PRIORITY,PARENT_ID,PARENT_IDS,`LEVEL`,PERMISSION,URL) VALUES (171,'城市首页配置',1,10,5,',0,5,',2,'city.homepage',NULL);

INSERT INTO 96365_user.function_info (FUNCTION_ID,FUNCTION_NAME,TYPE,PRIORITY,PARENT_ID,PARENT_IDS,`LEVEL`,PERMISSION,URL) VALUES (173,'新增开放城市',2,0,171,',0,5,171,',3,'city.homepage.save','/cityArea/save');

INSERT INTO 96365_user.function_info (FUNCTION_ID,FUNCTION_NAME,TYPE,PRIORITY,PARENT_ID,PARENT_IDS,`LEVEL`,PERMISSION,URL) VALUES (174,'修改开放城市',2,1,171,',0,5,171,',3,'city.homepage.modify','/cityArea/modify');

INSERT INTO 96365_user.function_info (FUNCTION_ID,FUNCTION_NAME,TYPE,PRIORITY,PARENT_ID,PARENT_IDS,`LEVEL`,PERMISSION,URL) VALUES (175,'删除开放城市',2,2,171,',0,5,171,',3,'city.homepage.del','/cityArea/del');

```