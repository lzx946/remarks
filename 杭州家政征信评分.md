## 建表

```sql
CREATE TABLE `dimension` (
  `dimension_id` varchar(20) NOT NULL COMMENT '维度ID',
  `dimension_name` varchar(30) NOT NULL COMMENT '维度名称',
  `dimension_key` varchar(10) NOT NULL COMMENT '维度关键字',
  `dimension_weight` int(11) NOT NULL DEFAULT '0' COMMENT '维度权重',
  `sort` int(11) NOT NULL DEFAULT '0' COMMENT '排序',
  `del_flag` varchar(1) NOT NULL DEFAULT '1' COMMENT '逻辑删除用(置0)',
  `create_id` varchar(20) NOT NULL COMMENT '创建人ID',
  `create_date` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  `modify_id` varchar(20) DEFAULT NULL COMMENT '修改人ID',
  `modify_date` timestamp NULL DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP COMMENT '修改时间',
  PRIMARY KEY (`dimension_id`),
  UNIQUE KEY `dimension_key_index` (`dimension_key`) USING BTREE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='征信评分维度表';

CREATE TABLE `indicators` (
  `indicators_id` varchar(20) NOT NULL COMMENT '指标ID',
  `indicators_name` varchar(30) NOT NULL COMMENT '指标名称',
  `indicators_key` varchar(10) NOT NULL COMMENT '指标关键字',
  `indicators_weight` int(11) DEFAULT '0' COMMENT '指标权重',
  `calculate_flag` varchar(1) NOT NULL DEFAULT '0' COMMENT '是否参与计算0=否，1=是',
  `edit_flag` varchar(2) NOT NULL DEFAULT '1' COMMENT '是否可编辑，0=否；1=是',
  `dimension_id` varchar(20) NOT NULL COMMENT '维度ID',
  `dimension_key` varchar(10) NOT NULL COMMENT '维度关键字',
  `del_flag` varchar(1) NOT NULL DEFAULT '1' COMMENT '逻辑删除用(置0)',
  `create_id` varchar(20) NOT NULL COMMENT '创建人ID',
  `create_date` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  `modify_id` varchar(20) DEFAULT NULL COMMENT '修改人ID',
  `modify_date` timestamp NULL DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP COMMENT '修改时间',
  PRIMARY KEY (`indicators_id`),
  UNIQUE KEY `indicators_key_index` (`indicators_key`) USING BTREE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='征信评分指标表';

CREATE TABLE `indicators_expand` (
  `expand_id` varchar(20) NOT NULL COMMENT '指标拓展ID',
  `indicators_id` varchar(20) NOT NULL COMMENT '指标ID',
  `indicators_key` varchar(10) NOT NULL COMMENT '指标关键字',
  `indicators_score` int(11) NOT NULL COMMENT '积分',
  `expand` varchar(500) DEFAULT NULL COMMENT '拓展字段',
  `sort` int(11) NOT NULL DEFAULT '0' COMMENT '排序',
  `del_flag` varchar(1) NOT NULL DEFAULT '1' COMMENT '逻辑删除用(置0)',
  `create_id` varchar(20) NOT NULL COMMENT '创建人ID',
  `create_date` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  `modify_id` varchar(20) DEFAULT NULL COMMENT '修改人ID',
  `modify_date` timestamp NULL DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP COMMENT '修改时间',
  PRIMARY KEY (`expand_id`),
  KEY `indicators_id_index` (`indicators_id`) USING BTREE,
  KEY `indicators_key_index` (`indicators_key`) USING BTREE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='征信评分指标拓展表';

CREATE TABLE `insurance` (
  `insurance_id` varchar(20) NOT NULL,
	`insurance_type` varchar(20) NOT NULL COMMENT '保险方案号',
  `insurance_name` varchar(45) NOT NULL COMMENT '保险名称',
  `insurance_key` varchar(10) NOT NULL COMMENT '保险关键字',
  `insurance_detail` varchar(200) DEFAULT NULL COMMENT '保险详情',
  `insurance_status` varchar(1) NOT NULL DEFAULT '1' COMMENT '保险状态：禁用为0,正常为1',
	`service_ids` varchar(100) NOT NULL COMMENT '服务工种IDs',
  `del_flag` varchar(1) NOT NULL COMMENT '逻辑删除0：删除　1：未删除',
  `create_date` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  `create_id` varchar(20) DEFAULT NULL COMMENT '创建人ID',
  `modify_date` timestamp NULL DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP COMMENT '修改时间',
  `modify_id` varchar(20) DEFAULT NULL COMMENT '修改人ID',
  PRIMARY KEY (`insurance_id`),
  UNIQUE KEY `insurance_key_index` (`insurance_key`) USING BTREE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT '其他保险表';

CREATE TABLE `credit_script` (
  `script_id` varchar(20) NOT NULL COMMENT '脚本ID',
  `indicators_key` varchar(10) NOT NULL COMMENT '指标关键字',
  `script_detail` mediumtext NOT NULL COMMENT '脚本详情',
  `script_description` varchar(50) DEFAULT NULL COMMENT '脚本描述',
  `del_flag` varchar(1) NOT NULL COMMENT '逻辑删除0：删除　1：未删除',
  `create_date` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  `create_id` varchar(20) DEFAULT NULL COMMENT '创建人ID',
  `modify_date` timestamp NULL DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP COMMENT '修改时间',
  `modify_id` varchar(20) DEFAULT NULL COMMENT '修改人ID',
  PRIMARY KEY (`script_id`),
  KEY `indicators_id_index` (`indicators_key`) USING BTREE
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='征信评分脚本表';

CREATE TABLE `employee_credit_record`(
	`record_id` varchar(20) NOT NULL,
  `emp_card_code` varchar(20) NOT NULL COMMENT '对应employee_card_code表id',
  `dimension_key` varchar(10) NOT NULL COMMENT '维度关键字',
	`indicators_key` varchar(10) NOT NULL COMMENT '指标关键字',
	`score` int(11) NOT NULL DEFAULT 0 COMMENT '积分',
  `evaluate_time` date NOT NULL COMMENT '评估时间',
  `create_date` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `modify_date` timestamp NULL DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`record_id`),
  UNIQUE KEY `emp_indicators_index` (`emp_card_code`,`indicators_key`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT '服务人员征信记录表（新）';

CREATE TABLE `credit_rule`(
	`rule_id` varchar(20) NOT NULL,
	`min_score` int(5) NOT NULL COMMENT '最低分',
	`max_score` int(5) NOT NULL COMMENT '最高分',
	`create_date` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `modify_date` timestamp NULL DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP,
	PRIMARY KEY (`rule_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT '征信评分计算规则设置表';

CREATE TABLE `employee_indicators`(
	`emp_indicators_id` VARCHAR(20) NOT NULL,
	`emp_id` varchar(20) NOT NULL COMMENT '员工id',
	`emp_card_code` varchar(20) NOT NULL COMMENT '对应employee_card_code表id',
	`indicators_key` VARCHAR(10) NOT NULL COMMENT '指标关键字',
	`dimension_key` VARCHAR(10) NOT NULL COMMENT '维度关键字',
	`verify_flag` VARCHAR(1) NOT NULL DEFAULT '0' COMMENT '审核标志(0=未审核；1=通过；2=不通过)',
	`verify_opinions` VARCHAR(200) DEFAULT NULL COMMENT '审核意见',
	`del_flag` VARCHAR(1) NOT NULL DEFAULT '1' COMMENT '逻辑删除用(置0)',
	`create_id` VARCHAR(20) NOT NULL COMMENT '创建人ID',
	`create_date` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
	`modify_id` VARCHAR(20) DEFAULT NULL COMMENT '修改人ID',
	`modify_date` TIMESTAMP NULL DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP COMMENT '修改时间',
	PRIMARY KEY(`emp_indicators_id`),
	KEY `indicators_key_index` (`indicators_key`) USING BTREE
)ENGINE=INNODB DEFAULT CHARSET=utf8mb4 COMMENT '服务人员指标关系表';


CREATE TABLE `employee_indicators_linked`(
	`linked_id` VARCHAR(20) NOT NULL,
	`emp_indicators_id` VARCHAR(20) NOT NULL COMMENT '关联employee_indicators表的ID',
	`linked_name` VARCHAR(30) NOT NULL COMMENT '链表节点名称',
	`parent_id` VARCHAR(20) NOT NULL DEFAULT '0' COMMENT '父节点ID',
	`data_type` VARCHAR(3) NOT NULL COMMENT '节点内容数据类型，对应枚举类DateTypeEnum',
	`precision_number` int(11) DEFAULT NULL COMMENT '数字精确值',
	`precision_string` VARCHAR(50) DEFAULT NULL COMMENT '字符串精确值',
	`precision_timestamp` TIMESTAMP NULL DEFAULT NULL COMMENT '日期时间精确值',
	`section_number_start` int(11) DEFAULT NULL COMMENT '数字区间开始值',
	`section_number_end` int(11) DEFAULT NULL COMMENT '数字区间结束值',
	`section_string_start` VARCHAR(50) DEFAULT NULL COMMENT '字符串区间开始值',
	`section_string_end` VARCHAR(50) DEFAULT NULL COMMENT '字符串区间结束值',
	`section_timestamp_start` TIMESTAMP NULL DEFAULT NULL COMMENT '日期时间区间开始值',
	`section_timestamp_end` TIMESTAMP NULL DEFAULT NULL COMMENT '日期时间区间结束值',
	`sort` int(11) NOT NULL DEFAULT 0 COMMENT '排序',
	`show_flag` VARCHAR(1) NOT NULL DEFAULT '1' COMMENT '是否在服务人员详情页显示(0=否；1=是)',
	`score_flag` VARCHAR (3) NOT NULL DEFAULT '0' COMMENT '是否参与积分计算(0=否；1=是)',
	`del_flag` VARCHAR(1) NOT NULL DEFAULT '1' COMMENT '逻辑删除用(置0)',
	`create_id` VARCHAR(20) NOT NULL COMMENT '创建人ID',
	`create_date` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
	`modify_id` VARCHAR(20) DEFAULT NULL COMMENT '修改人ID',
	`modify_date` TIMESTAMP NULL DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP COMMENT '修改时间',
	PRIMARY KEY(linked_id),
	KEY `emp_indicators_id_index` (`emp_indicators_id`) USING BTREE,
	KEY `data_type_index` (`data_type`) USING BTREE
)ENGINE=INNODB DEFAULT CHARSET=utf8mb4 COMMENT '服务人员和指标信息拓展链表';
```

## 修改表结构

- 日志表修改字段长度

```sql
ALTER TABLE 96365_mall.employee_operation_log MODIFY COLUMN `operation_method` varchar(400) NOT NULL;
```

- 服务人员表添加新征信评分字段

```sql
ALTER TABLE 96365_mall.employee ADD COLUMN `emp_credit` int(11) NOT NULL DEFAULT 0 COMMENT '征信评分（新）' AFTER `emp_score`;

ALTER TABLE 96365_mall.employee ADD COLUMN `emp_dimension_credit` varchar(255) DEFAULT NULL COMMENT '征信维度评分（新）' AFTER `emp_credit`;
```

- 工作经历表添加审核

```sql
ALTER TABLE `employee_experience` ADD COLUMN `verify_flag` varchar(2) NOT NULL DEFAULT '1' COMMENT '审核标志（0=未审核，1=通过，2=不通过）';

ALTER TABLE `employee_experience` ADD COLUMN `verify_opinions` varchar(200) DEFAULT NULL COMMENT '审核意见';
```

- 证书表添加审核和关键字

执行前应先生成所有证书

```sql
ALTER TABLE `employee_certificate` ADD COLUMN `verify_flag` varchar(2) NOT NULL DEFAULT '1' COMMENT '审核标志（0=未审核，1=通过，2=不通过）';

ALTER TABLE `employee_certificate` ADD COLUMN `verify_opinions` varchar(200) DEFAULT NULL COMMENT '审核意见';

ALTER TABLE `employee_certificate` ADD COLUMN `certificate_key` varchar(10) NOT NULL DEFAULT '' COMMENT '证书关键字';

UPDATE employee_certificate ec 
LEFT JOIN certificate c ON c.certificate_name = ec.CERTIFICATE_NAME 
SET ec.certificate_key = c.certificate_key 
WHERE ec.del_flag = '1' AND c.del_flag = '1';
```

- 保险表添加审核和关键字

执行前应先生成所有保险

```sql
SELECT insurance_company FROM employee_insurance_info WHERE del_flag = '1' GROUP BY insurance_company;
```

```sql
ALTER TABLE `employee_insurance_info` ADD COLUMN `verify_flag` varchar(2) NOT NULL DEFAULT '1' COMMENT '审核标志（0=未审核，1=通过，2=不通过）';

ALTER TABLE `employee_insurance_info` ADD COLUMN `verify_opinions` varchar(200) DEFAULT NULL COMMENT '审核意见';

ALTER TABLE `employee_insurance_info` ADD COLUMN `insurance_key` varchar(10) NOT NULL DEFAULT '' COMMENT '保险关键字';

UPDATE employee_insurance_info eii 
LEFT JOIN insurance i ON i.insurance_name = eii.insurance_company 
SET eii.insurance_key = i.insurance_key 
WHERE eii.del_flag = '1' AND i.del_flag = '1';
```

### 添加权限

```sql
INSERT INTO 96365_user.function_info (FUNCTION_ID,FUNCTION_NAME,TYPE,PRIORITY,PARENT_ID,PARENT_IDS,`LEVEL`,PERMISSION,URL) VALUES (148,'审核服务人员工作经历',2,0,161,',0,3,161,',3,'experience.verify','/experience/verify');

INSERT INTO 96365_user.function_info (FUNCTION_ID,FUNCTION_NAME,TYPE,PRIORITY,PARENT_ID,PARENT_IDS,`LEVEL`,PERMISSION,URL) VALUES (149,'审核服务人员证书',2,1,161,',0,3,161,',3,'certificate.verify','/certificate/verify');

INSERT INTO 96365_user.function_info (FUNCTION_ID,FUNCTION_NAME,TYPE,PRIORITY,PARENT_ID,PARENT_IDS,`LEVEL`,PERMISSION,URL) VALUES (150,'审核服务人员保险信息',2,2,161,',0,3,161,',3,'insurance.verify','/employee/insurance/verify');

INSERT INTO 96365_user.function_info (FUNCTION_ID,FUNCTION_NAME,TYPE,PRIORITY,PARENT_ID,PARENT_IDS,`LEVEL`,PERMISSION,URL) VALUES (151,'评分计算规则设置',1,7,5,',0,5,',2,'credit.rule',NULL);

INSERT INTO 96365_user.function_info (FUNCTION_ID,FUNCTION_NAME,TYPE,PRIORITY,PARENT_ID,PARENT_IDS,`LEVEL`,PERMISSION,URL) VALUES (152,'资格证书管理',1,8,5,',0,5,',2,'certificate.manage',NULL);

INSERT INTO 96365_user.function_info (FUNCTION_ID,FUNCTION_NAME,TYPE,PRIORITY,PARENT_ID,PARENT_IDS,`LEVEL`,PERMISSION,URL) VALUES (153,'保存评分计算规则',2,0,151,',0,5,151,',3,'credit.rule.save','/credit/rule/save');

INSERT INTO 96365_user.function_info (FUNCTION_ID,FUNCTION_NAME,TYPE,PRIORITY,PARENT_ID,PARENT_IDS,`LEVEL`,PERMISSION,URL) VALUES (154,'添加资格证书',2,0,152,',0,5,152,',3,'certificate.manage.save','/certificate/manage/save');

INSERT INTO 96365_user.function_info (FUNCTION_ID,FUNCTION_NAME,TYPE,PRIORITY,PARENT_ID,PARENT_IDS,`LEVEL`,PERMISSION,URL) VALUES (155,'编辑资格证书',2,1,152,',0,5,152,',3,'certificate.manage.edit','/certificate/manage/modify');

INSERT INTO 96365_user.function_info (FUNCTION_ID,FUNCTION_NAME,TYPE,PRIORITY,PARENT_ID,PARENT_IDS,`LEVEL`,PERMISSION,URL) VALUES (156,'删除资格证书',2,2,152,',0,5,152,',3,'certificate.manage.delete','/certificate/manage/delete');

INSERT INTO 96365_user.function_info (FUNCTION_ID,FUNCTION_NAME,TYPE,PRIORITY,PARENT_ID,PARENT_IDS,`LEVEL`,PERMISSION,URL) VALUES (157,'编辑指标',2,0,162,',0,5,162,',3,'credit.indicators.save','/indicators/save');


INSERT INTO 96365_user.function_info (FUNCTION_ID,FUNCTION_NAME,TYPE,PRIORITY,PARENT_ID,PARENT_IDS,`LEVEL`,PERMISSION,URL) VALUES (158,'删除指标',2,1,162,',0,5,162,',3,'credit.indicators.delete','/indicators/del');

INSERT INTO 96365_user.function_info (FUNCTION_ID,FUNCTION_NAME,TYPE,PRIORITY,PARENT_ID,PARENT_IDS,`LEVEL`,PERMISSION,URL) VALUES (159,'编辑脚本',2,2,162,',0,5,162,',3,'credit.indicators.script.save','/script/save');

INSERT INTO 96365_user.function_info (FUNCTION_ID,FUNCTION_NAME,TYPE,PRIORITY,PARENT_ID,PARENT_IDS,`LEVEL`,PERMISSION,URL) VALUES (160,'添加指标',2,3,162,',0,5,162,',3,'credit.indicators.add','/indicators/addToCalculate');

INSERT INTO 96365_user.function_info (FUNCTION_ID,FUNCTION_NAME,TYPE,PRIORITY,PARENT_ID,PARENT_IDS,`LEVEL`,PERMISSION,URL) VALUES (161,'待审核服务人员',1,1,3,',0,3,',2,'employee.unverify',NULL);

INSERT INTO 96365_user.function_info (FUNCTION_ID,FUNCTION_NAME,TYPE,PRIORITY,PARENT_ID,PARENT_IDS,`LEVEL`,PERMISSION,URL) VALUES (162,'诚信评分设置',1,9,5,',0,5,',2,'credit.new',NULL);

INSERT INTO 96365_user.function_info (FUNCTION_ID,FUNCTION_NAME,TYPE,PRIORITY,PARENT_ID,PARENT_IDS,`LEVEL`,PERMISSION,URL) VALUES (163,'保存维度',2,1,151,',0,5,151,',3,'credit.dimension.save','/dimension/save');

INSERT INTO 96365_user.function_info (FUNCTION_ID,FUNCTION_NAME,TYPE,PRIORITY,PARENT_ID,PARENT_IDS,`LEVEL`,PERMISSION,URL) VALUES (164,'修改维度',2,2,151,',0,5,151,',3,'credit.dimension.modify','/dimension/modify');

INSERT INTO 96365_user.function_info (FUNCTION_ID,FUNCTION_NAME,TYPE,PRIORITY,PARENT_ID,PARENT_IDS,`LEVEL`,PERMISSION,URL) VALUES (165,'修改维度权重',2,3,151,',0,5,151,',3,'credit.dimension.weight.modify','/dimension/weight/modify');

INSERT INTO 96365_user.function_info (FUNCTION_ID,FUNCTION_NAME,TYPE,PRIORITY,PARENT_ID,PARENT_IDS,`LEVEL`,PERMISSION,URL) VALUES (166,'删除维度',2,4,151,',0,5,151,',3,'credit.dimension.delete','/dimension/del');

INSERT INTO 96365_user.function_info (FUNCTION_ID,FUNCTION_NAME,TYPE,PRIORITY,PARENT_ID,PARENT_IDS,`LEVEL`,PERMISSION,URL) VALUES (176,'添加其他保险',2,2,129,',0,5,129,',3,'orther.insurance.save','/other/insurance/save');

INSERT INTO 96365_user.function_info (FUNCTION_ID,FUNCTION_NAME,TYPE,PRIORITY,PARENT_ID,PARENT_IDS,`LEVEL`,PERMISSION,URL) VALUES (177,'修改其他保险',2,3,129,',0,5,129,',3,'orther.insurance.modify','/other/insurance/modify');

INSERT INTO 96365_user.function_info (FUNCTION_ID,FUNCTION_NAME,TYPE,PRIORITY,PARENT_ID,PARENT_IDS,`LEVEL`,PERMISSION,URL) VALUES (178,'删除其他保险',2,4,129,',0,5,129,',3,'orther.insurance.delete','/other/insurance/del');

```

### 弃用sql

```sql
CREATE TABLE `indicators`(
	`indicators_id` VARCHAR(20) NOT NULL COMMENT '指标节点ID',
	`indicators_name` VARCHAR(30) NOT NULL COMMENT '指标节点名称',
	`indicators_key` VARCHAR(10) DEFAULT NULL COMMENT '指标关键字',
	`indicators_score` int(11) DEFAULT NULL COMMENT '指标积分',
	`indicators_weight` int(11) DEFAULT NULL DEFAULT 0 COMMENT '指标权重',
	`level` int(11) NOT NULL DEFAULT 0 COMMENT '层级',
	`parent_id` VARCHAR(20) NOT NULL DEFAULT '0' COMMENT '父节点ID',
	`root_id` VARCHAR(20) NOT NULL COMMENT '根节点ID',
	`dimension_id` VARCHAR(20) NOT NULL COMMENT '维度ID',
	`dimension_key` VARCHAR(10) NOT NULL COMMENT '维度关键字',
	`data_type` VARCHAR(3) NOT NULL COMMENT '节点内容数据类型，对应枚举类DateTypeEnum',
	`precision_number` int(11) DEFAULT NULL COMMENT '数字精确值',
	`precision_string` VARCHAR(50) DEFAULT NULL COMMENT '字符串精确值',
	`precision_timestamp` TIMESTAMP NULL DEFAULT NULL COMMENT '日期时间精确值',
	`section_number_start` int(11) DEFAULT NULL COMMENT '数字区间开始值',
	`section_number_end` int(11) DEFAULT NULL COMMENT '数字区间结束值',
	`section_string_start` VARCHAR(50) DEFAULT NULL COMMENT '字符串区间开始值',
	`section_string_end` VARCHAR(50) DEFAULT NULL COMMENT '字符串区间结束值',
	`section_timestamp_start` TIMESTAMP NULL DEFAULT NULL COMMENT '日期时间区间开始值',
	`section_timestamp_end` TIMESTAMP NULL DEFAULT NULL COMMENT '日期时间区间结束值',
	`sort` int(11) NOT NULL DEFAULT 0 COMMENT '排序',
	`show_flag` VARCHAR(1) NOT NULL DEFAULT '1' COMMENT '是否在服务人员详情页显示(0=否；1=是)',
	`del_flag` VARCHAR(1) NOT NULL DEFAULT '1' COMMENT '逻辑删除用(置0)',
	`create_id` VARCHAR(20) NOT NULL COMMENT '创建人ID',
	`create_date` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
	`modify_id` VARCHAR(20) DEFAULT NULL COMMENT '修改人ID',
	`modify_date` TIMESTAMP NULL DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP COMMENT '修改时间',
	PRIMARY KEY(`indicators_id`),
	UNIQUE KEY `indicators_key_index` (`indicators_key`) USING BTREE,
	KEY `data_type_index` (`data_type`) USING BTREE
)ENGINE=INNODB DEFAULT CHARSET=utf8mb4 COMMENT '征信评分指标表';
```


```js
var dataList = new Object();
var insurance = new Object();

dataList.info = getData();
insurance.info = getIndicators();
    
console.log(insurance.info)
function getData(){
    var data;
    $.ajax({
        url:"localhost:10301/script/getData",    //请求的url地址
        dataType:"json",   //返回格式为json
        async:true,//请求是否异步，默认为异步，这也是ajax重要特性
        data:{
                "dataKey":"value",
                "dataType": ""
             },    //参数值
        type:"POST",   //请求方式
        beforeSend:function(){
            //请求前的处理
        },
        success:function(req){
            //请求成功时处理
            data = req.get("data");
            return data;
        },
        complete:function(){
            //请求完成的处理
        },
        error:function(){
            //请求出错处理
        }
    });
}

function getIndicators(){
    var indicators;
    $.ajax({
        url:"localhost:10301/script/getIndicators",    //请求的url地址
        dataType:"json",   //返回格式为json
        async:true,//请求是否异步，默认为异步，这也是ajax重要特性
        data:{
                "indicatorsKey":"TJBGot7FnY"
             },    //参数值
        type:"POST",   //请求方式
        beforeSend:function(){
            //请求前的处理
        },
        success:function(req){
            //请求成功时处理
            insurance = req.get("data");
            return insurance;
        },
        complete:function(){
            //请求完成的处理
        },
        error:function(){
            //请求出错处理
        }
    });

}
```

```js
var indicatorsKey = "JKZpAYtgWX";
var dataKey = "JKZE2EHPpX";
var dataType = "healthy";
var indicatorsList;
var dataList;

var creditMapList = calculateCredit(indicatorsList,dataList);
creditMapList = JSON.stringify(creditMapList);

function calculateCredit(indicatorsList,dataList) {
  var creditMapList = [];
  if (null != indicatorsList && null != dataList){
    var nowDate = currentDate();
    for(var i = 0; i < dataList.length; i++) {
      var data = dataList[i];
      var empCardCode = data.empCardCode;
      var score = 0;
      for(var j = 0; j < indicatorsList.length; j++) {
        if (compareDate(nowDate,data.effectiveStartDate) && compareDate(data.effectiveEndDate,nowDate)){
            var indicators = indicatorsList[j];
            if (data.checked == "1" && indicators.A == "有健康证，指定体检机构"){
                score += indicators.indicatorsScore;
            }else if (data.checked == "0" && indicators.A == "有健康证，非指定体检机构"){
                score += indicators.indicatorsScore;
            } 
        } 
      }
      var creditMap = new Object();
      creditMap.empCardCode = empCardCode;
      creditMap.score = score;
      creditMapList.push(creditMap);
    }
  }
  return creditMapList;
}

//比较日期大小
function compareDate(date1, date2) {
    var date1 = new Date(date1);
    var date2 = new Date(date2);
    if (date1.getTime() > date2.getTime()) {
        return true;
    } else {
        return false;
    }
}

//获取当前系统日期（年-月-日）
function currentDate() {
    var d = new Date(), str = '';
    str += d.getFullYear(); //获取当前年份
    var month = d.getMonth() + 1;
    month = (month < 10 ? "0" + month : month);
    str += "-" + month; //获取当前月份（0——11）
    var date = d.getDate();
    date = (date < 10 ? "0" + date : date);
    str += "-" + date;
    return str;
}
```

```js
var indicatorsKey = "YLZJSS2623";
var dataKey = "YLHLHZ34A5";
var dataType = "certificate";
var indicatorsList;
var dataList;

var creditMapList = calculateCredit(indicatorsList,dataList);
creditMapList = JSON.stringify(creditMapList);

function calculateCredit(indicatorsList,dataList) {
  var creditMapList = [];
  if (null != indicatorsList && null != dataList){
    var nowDate = currentDate();
    for(var i = 0; i < dataList.length; i++) {
      var data = dataList[i];
      var empCardCode = data.empCardCode;
      var score = 0;
      for(var j = 0; j < indicatorsList.length; j++) {
        if (compareDate(nowDate,data.effectiveStartDate) && compareDate(data.effectiveEndDate,nowDate)){
            var indicators = indicatorsList[j];
            if (data.certificateLevel == "0" && data.certificationLevel == "0" && indicators.A == "初级" && indicators.B == "国家"){
                score += indicators.indicatorsScore;
            }else if (data.certificateLevel == "0" && data.certificationLevel == "1" && indicators.A == "初级" && indicators.B == "省市"){
                score += indicators.indicatorsScore;
            }else if (data.certificateLevel == "0" && data.certificationLevel == "2" && indicators.A == "初级" && indicators.B == "其他"){
                score += indicators.indicatorsScore;
            }else if (data.certificateLevel == "1" && data.certificationLevel == "0" && indicators.A == "中级" && indicators.B == "国家"){
                score += indicators.indicatorsScore;
            }else if (data.certificateLevel == "1" && data.certificationLevel == "1" && indicators.A == "中级" && indicators.B == "省市"){
                score += indicators.indicatorsScore;
            }else if (data.certificateLevel == "1" && data.certificationLevel == "2" && indicators.A == "中级" && indicators.B == "其他"){
                score += indicators.indicatorsScore;
            }else if (data.certificateLevel == "2" && data.certificationLevel == "0" && indicators.A == "高级" && indicators.B == "国家"){
                score += indicators.indicatorsScore;
            }else if (data.certificateLevel == "2" && data.certificationLevel == "1" && indicators.A == "高级" && indicators.B == "省市"){
                score += indicators.indicatorsScore;
            }else if (data.certificateLevel == "2" && data.certificationLevel == "2" && indicators.A == "高级" && indicators.B == "其他"){
                score += indicators.indicatorsScore;
            }
        } 
      }
      var creditMap = new Object();
      creditMap.empCardCode = empCardCode;
      creditMap.score = score;
      creditMapList.push(creditMap);
    }
  }
  return creditMapList;
}

//比较日期大小
function compareDate(date1, date2) {
    var date1 = new Date(date1);
    var date2 = new Date(date2);
    if (date1.getTime() > date2.getTime()) {
        return true;
    } else {
        return false;
    }
}

//获取当前系统日期（年-月-日）
function currentDate() {
    var d = new Date(), str = '';
    str += d.getFullYear(); //获取当前年份
    var month = d.getMonth() + 1;
    month = (month < 10 ? "0" + month : month);
    str += "-" + month; //获取当前月份（0——11）
    var date = d.getDate();
    date = (date < 10 ? "0" + date : date);
    str += "-" + date;
    return str;
}
```

```js
var indicatorsKey = \"JKZpAYtgWX\";\nvar dataKey = \"JKZE2EHPpX\";\n var dataType = \"healthy\";\n var indicatorsList;\n var dataList;\n\n var creditMapList = calculateCredit(indicatorsList,dataList);\n\n\n function calculateCredit(indicatorsList,dataList) {\n var creditMapList = [];\n if (null != indicatorsList && null != dataList){\n var nowDate = currentDate();\n for(var i = 0; i < dataList.length; i++) {\n var data = dataList[i];\n var empCardCode = data.empCardCode;\n var score = 0;\n for(var j = 0; j < indicatorsList.length; j++) {\n if (compareDate(nowDate,data.effectiveStartDate) && compareDate(data.effectiveEndDate,nowDate)){\n var indicators = indicatorsList[j];\n if (data.checked == \"1\" && indicators.A == \"有健康证，指定体检机构\"){\n score += indicators.indicatorsScore;\n }else if (data.checked == \"0\" && indicators.A == \"有健康证，非指定体检机构\"){\n score += indicators.indicatorsScore;\n } \n } \n }\n var creditMap = new Object();\n creditMap.empCardCode = empCardCode;\n creditMap.score = score;\n creditMapList.push(creditMap);\n}\n}\n return creditMapList;\n}\n\n//比较日期大小\nfunction compareDate(date1, date2) {\nvar date1 = new Date(date1);\nvar date2 = new Date(date2);\nif (date1.getTime() > date2.getTime()) {\nreturn true;\n} else {\nreturn false;\n}\n}\n\n//获取当前系统日期（年-月-日）\nfunction currentDate() {\nvar d = new Date(), str = '';\nstr += d.getFullYear(); //获取当前年份\nvar month = d.getMonth() + 1;\nmonth = (month < 10 ? \"0\" + month : month);\nstr += \"-\" + month; //获取当前月份（0——11）\nvar date = d.getDate();\ndate = (date < 10 ? \"0\" + date : date);\nstr += \"-\" + date;\nreturn str;\n}

var indicatorsKey = \"YLZJSS2623\";\n var dataKey = \"YLHLHZ34A5\";\n var dataType = \"certificate\";\n var indicatorsList;\n var dataList;\n\n var creditMapList = calculateCredit(indicatorsList,dataList);\n\n\nfunction calculateCredit(indicatorsList,dataList) {\n var creditMapList = [];\n if (null != indicatorsList && null != dataList){\n var nowDate = currentDate();\n for(var i = 0; i < dataList.length; i++) {\n var data = dataList[i];\n var empCardCode = data.empCardCode;\n var score = 0;\n for(var j = 0; j < indicatorsList.length; j++) {\n if (compareDate(nowDate,data.effectiveStartDate) && compareDate(data.effectiveEndDate,nowDate)){\n var indicators = indicatorsList[j];\n if (data.certificateLevel == \"0\" && data.certificationLevel == \"0\" && indicators.A == \"初级\" && indicators.B == \"国家\"){\n score += indicators.indicatorsScore;\n}else if (data.certificateLevel == \"0\" && data.certificationLevel == \"1\" && indicators.A == \"初级\" && indicators.B == \"省市\"){\n score += indicators.indicatorsScore;\n}else if (data.certificateLevel == \"0\" && data.certificationLevel == \"2\" && indicators.A == \"初级\" && indicators.B == \"其他\"){\n score += indicators.indicatorsScore;\n}else if (data.certificateLevel == \"1\" && data.certificationLevel == \"0\" && indicators.A == \"中级\" && indicators.B == \"国家\"){\n score += indicators.indicatorsScore;\n}else if (data.certificateLevel == \"1\" && data.certificationLevel == \"1\" && indicators.A == \"中级\" && indicators.B == \"省市\"){\n score += indicators.indicatorsScore;\n}else if (data.certificateLevel == \"1\" && data.certificationLevel == \"2\" && indicators.A == \"中级\" && indicators.B == \"其他\"){\n score += indicators.indicatorsScore;\n}else if (data.certificateLevel == \"2\" && data.certificationLevel == \"0\" && indicators.A == \"高级\" && indicators.B == \"国家\"){\n score += indicators.indicatorsScore;\n}else if (data.certificateLevel == \"2\" && data.certificationLevel == \"1\" && indicators.A == \"高级\" && indicators.B == \"省市\"){\n score += indicators.indicatorsScore;\n}else if (data.certificateLevel == \"2\" && data.certificationLevel == \"2\" && indicators.A == \"高级\" && indicators.B == \"其他\"){\n score += indicators.indicatorsScore;\n}\n} \n}\n var creditMap = new Object();\n creditMap.empCardCode = empCardCode.toString();\n creditMap.score = score.toString();\n creditMapList.push(creditMap);\n}\n}\n return creditMapList;\n}\n\n//比较日期大小\nfunction compareDate(date1, date2) {\n var date1 = new Date(date1);\n var date2 = new Date(date2);\n if (date1.getTime() > date2.getTime()) {\n return true;\n} else {\n return false;\n}\n}\n\n//获取当前系统日期（年-月-日）\nfunction currentDate() {\n var d = new Date(), str = '';\n str += d.getFullYear(); //获取当前年份\nvar month = d.getMonth() + 1;\n month = (month < 10 ? \"0\" + month : month);\n str += \"-\" + month; //获取当前月份（0——11）\n var date = d.getDate();\n date = (date < 10 ? \"0\" + date : date);\n str += \"-\" + date;\n return str;\n}
```

```js

function compareDate(startDate, endDate) {
    var arrStart = startDate.split("-");
    var startTime = new Date(arrStart[0], arrStart[1], arrStart[2]);
    var startTimes = startTime.getTime();
    var arrEnd = endDate.split("-");
    var endTime = new Date(arrEnd[0], arrEnd[1], arrEnd[2]);
    var endTimes = endTime.getTime();
    if (endTimes <startTimes){
        mui.toast("开始时间不能大于结束时间和当前时间！");
        return true;
    }
    return false;
}





//比较时间大小,bb<aa（false） ;aa>=bb（true）
function checkEndTime(aa, bb) {
    var startTime = aa;
    var start = new Date(startTime.replace("-", "/").replace("-", "/"));
    var endTime = bb;
    var end = new Date(endTime.replace("-", "/").replace("-", "/"));
    if (end < start) {
        return false;
    }
    return true;
}




for(let data of dataList) {
      for(let indicators of indicatorsList) {
        if (data.get("effectiveStartDate") <= now() && data.get("effectiveEndDate") >= now()){
            alert("1111");
        }           
      }
    }
```


- 测试脚本

> * 母婴护理证

```js
var indicatorsKey = "MYHLqsRTej";
var dataKey = "MYHLoisBJ6";
var dataType = "certificate";
var indicatorsList;
var dataList;

var creditMapList = calculateCredit(indicatorsList,dataList);
creditMapList = JSON.stringify(creditMapList);

function calculateCredit(indicatorsList,dataList) {
  var creditMapList = [];
  if (null != indicatorsList && null != dataList){
    var nowDate = currentDate();
    for(var i = 0; i < dataList.length; i++) {
      var data = dataList[i];
      var empCardCode = data.empCardCode;
      var score = 0;
      for(var j = 0; j < indicatorsList.length; j++) {
        if (compareDate(nowDate,data.effectiveStartDate) && compareDate(data.effectiveEndDate,nowDate)){
            var indicators = indicatorsList[j];
            if (data.certificateLevel == "0" && data.certificationLevel == "0" && indicators.A == "初级" && indicators.B == "国家"){
                score += indicators.indicatorsScore;
            }else if (data.certificateLevel == "0" && data.certificationLevel == "1" && indicators.A == "初级" && indicators.B == "省市"){
                score += indicators.indicatorsScore;
            }else if (data.certificateLevel == "0" && data.certificationLevel == "2" && indicators.A == "初级" && indicators.B == "其他"){
                score += indicators.indicatorsScore;
            }else if (data.certificateLevel == "1" && data.certificationLevel == "0" && indicators.A == "中级" && indicators.B == "国家"){
                score += indicators.indicatorsScore;
            }else if (data.certificateLevel == "1" && data.certificationLevel == "1" && indicators.A == "中级" && indicators.B == "省市"){
                score += indicators.indicatorsScore;
            }else if (data.certificateLevel == "1" && data.certificationLevel == "2" && indicators.A == "中级" && indicators.B == "其他"){
                score += indicators.indicatorsScore;
            }else if (data.certificateLevel == "2" && data.certificationLevel == "0" && indicators.A == "高级" && indicators.B == "国家"){
                score += indicators.indicatorsScore;
            }else if (data.certificateLevel == "2" && data.certificationLevel == "1" && indicators.A == "高级" && indicators.B == "省市"){
                score += indicators.indicatorsScore;
            }else if (data.certificateLevel == "2" && data.certificationLevel == "2" && indicators.A == "高级" && indicators.B == "其他"){
                score += indicators.indicatorsScore;
            }
        } 
      }
      var creditMap = new Object();
      creditMap.empCardCode = empCardCode;
      creditMap.score = score;
      creditMapList.push(creditMap);
    }
  }
  return creditMapList;
}

//比较日期大小
function compareDate(date1, date2) {
    var date1 = new Date(date1);
    var date2 = new Date(date2);
    if (date1.getTime() > date2.getTime()) {
        return true;
    } else {
        return false;
    }
}

//获取当前系统日期（年-月-日）
function currentDate() {
    var d = new Date(), str = '';
    str += d.getFullYear(); //获取当前年份
    var month = d.getMonth() + 1;
    month = (month < 10 ? "0" + month : month);
    str += "-" + month; //获取当前月份（0——11）
    var date = d.getDate();
    date = (date < 10 ? "0" + date : date);
    str += "-" + date;
    return str;
}
```

> * 病患护理员证

```js
var indicatorsKey = "YLXX";
var dataKey = "BHHLmjwOam";
var dataType = "certificate";
var indicatorsList;
var dataList;

var creditMapList = calculateCredit(indicatorsList,dataList);
creditMapList = JSON.stringify(creditMapList);

function calculateCredit(indicatorsList,dataList) {
  var creditMapList = [];
  if (null != indicatorsList && null != dataList){
    var nowDate = currentDate();
    for(var i = 0; i < dataList.length; i++) {
      var data = dataList[i];
      var empCardCode = data.empCardCode;
      var score = 0;
      for(var j = 0; j < indicatorsList.length; j++) {
        if (compareDate(nowDate,data.effectiveStartDate) && compareDate(data.effectiveEndDate,nowDate)){
            var indicators = indicatorsList[j];
            if (data.certificateLevel == "0" && data.certificationLevel == "0" && indicators.A == "初级" && indicators.B == "国家"){
                score += indicators.indicatorsScore;
            }else if (data.certificateLevel == "0" && data.certificationLevel == "1" && indicators.A == "初级" && indicators.B == "省市"){
                score += indicators.indicatorsScore;
            }else if (data.certificateLevel == "0" && data.certificationLevel == "2" && indicators.A == "初级" && indicators.B == "其他"){
                score += indicators.indicatorsScore;
            }else if (data.certificateLevel == "1" && data.certificationLevel == "0" && indicators.A == "中级" && indicators.B == "国家"){
                score += indicators.indicatorsScore;
            }else if (data.certificateLevel == "1" && data.certificationLevel == "1" && indicators.A == "中级" && indicators.B == "省市"){
                score += indicators.indicatorsScore;
            }else if (data.certificateLevel == "1" && data.certificationLevel == "2" && indicators.A == "中级" && indicators.B == "其他"){
                score += indicators.indicatorsScore;
            }else if (data.certificateLevel == "2" && data.certificationLevel == "0" && indicators.A == "高级" && indicators.B == "国家"){
                score += indicators.indicatorsScore;
            }else if (data.certificateLevel == "2" && data.certificationLevel == "1" && indicators.A == "高级" && indicators.B == "省市"){
                score += indicators.indicatorsScore;
            }else if (data.certificateLevel == "2" && data.certificationLevel == "2" && indicators.A == "高级" && indicators.B == "其他"){
                score += indicators.indicatorsScore;
            }
        } 
      }
      var creditMap = new Object();
      creditMap.empCardCode = empCardCode;
      creditMap.score = score;
      creditMapList.push(creditMap);
    }
  }
  return creditMapList;
}

//比较日期大小
function compareDate(date1, date2) {
    var date1 = new Date(date1);
    var date2 = new Date(date2);
    if (date1.getTime() > date2.getTime()) {
        return true;
    } else {
        return false;
    }
}

//获取当前系统日期（年-月-日）
function currentDate() {
    var d = new Date(), str = '';
    str += d.getFullYear(); //获取当前年份
    var month = d.getMonth() + 1;
    month = (month < 10 ? "0" + month : month);
    str += "-" + month; //获取当前月份（0——11）
    var date = d.getDate();
    date = (date < 10 ? "0" + date : date);
    str += "-" + date;
    return str;
}
```

> * 养老护理证书

```js
var indicatorsKey = "YLZJSS2623";
var dataKey = "YLHLHZ34A5";
var dataType = "certificate";
var indicatorsList;
var dataList;

var creditMapList = calculateCredit(indicatorsList,dataList);
creditMapList = JSON.stringify(creditMapList);

function calculateCredit(indicatorsList,dataList) {
  var creditMapList = [];
  if (null != indicatorsList && null != dataList){
    var nowDate = currentDate();
    for(var i = 0; i < dataList.length; i++) {
      var data = dataList[i];
      var empCardCode = data.empCardCode;
      var score = 0;
      for(var j = 0; j < indicatorsList.length; j++) {
        if (compareDate(nowDate,data.effectiveStartDate) && compareDate(data.effectiveEndDate,nowDate)){
            var indicators = indicatorsList[j];
            if (data.certificateLevel == "0" && data.certificationLevel == "0" && indicators.A == "初级" && indicators.B == "国家"){
                score += indicators.indicatorsScore;
            }else if (data.certificateLevel == "0" && data.certificationLevel == "1" && indicators.A == "初级" && indicators.B == "省市"){
                score += indicators.indicatorsScore;
            }else if (data.certificateLevel == "0" && data.certificationLevel == "2" && indicators.A == "初级" && indicators.B == "其他"){
                score += indicators.indicatorsScore;
            }else if (data.certificateLevel == "1" && data.certificationLevel == "0" && indicators.A == "中级" && indicators.B == "国家"){
                score += indicators.indicatorsScore;
            }else if (data.certificateLevel == "1" && data.certificationLevel == "1" && indicators.A == "中级" && indicators.B == "省市"){
                score += indicators.indicatorsScore;
            }else if (data.certificateLevel == "1" && data.certificationLevel == "2" && indicators.A == "中级" && indicators.B == "其他"){
                score += indicators.indicatorsScore;
            }else if (data.certificateLevel == "2" && data.certificationLevel == "0" && indicators.A == "高级" && indicators.B == "国家"){
                score += indicators.indicatorsScore;
            }else if (data.certificateLevel == "2" && data.certificationLevel == "1" && indicators.A == "高级" && indicators.B == "省市"){
                score += indicators.indicatorsScore;
            }else if (data.certificateLevel == "2" && data.certificationLevel == "2" && indicators.A == "高级" && indicators.B == "其他"){
                score += indicators.indicatorsScore;
            }
        } 
      }
      var creditMap = new Object();
      creditMap.empCardCode = empCardCode;
      creditMap.score = score;
      creditMapList.push(creditMap);
    }
  }
  return creditMapList;
}

//比较日期大小
function compareDate(date1, date2) {
    var date1 = new Date(date1);
    var date2 = new Date(date2);
    if (date1.getTime() > date2.getTime()) {
        return true;
    } else {
        return false;
    }
}

//获取当前系统日期（年-月-日）
function currentDate() {
    var d = new Date(), str = '';
    str += d.getFullYear(); //获取当前年份
    var month = d.getMonth() + 1;
    month = (month < 10 ? "0" + month : month);
    str += "-" + month; //获取当前月份（0——11）
    var date = d.getDate();
    date = (date < 10 ? "0" + date : date);
    str += "-" + date;
    return str;
}
```


- 测试脚本

> * 母婴护理证

```js
var indicatorsKey = "MYHLqsRTej";
var dataKey = "MYHLoisBJ6";
var dataType = "certificate";
var indicatorsList;
var dataList;

var creditMapList = calculateCredit(indicatorsList,dataList);
creditMapList = JSON.stringify(creditMapList);

function calculateCredit(indicatorsList,dataList) {
  var creditMapList = [];
  if (null != indicatorsList && null != dataList){
    var nowDate = currentDate();
    for(var i = 0; i < dataList.length; i++) {
      var data = dataList[i];
      var empCardCode = data.empCardCode;
      var score = 0;
      for(var j = 0; j < indicatorsList.length; j++) {
        if (compareDate(nowDate,data.effectiveStartDate) && compareDate(data.effectiveEndDate,nowDate)){
            var indicators = indicatorsList[j];
            if (data.certificateLevel == "0" && data.certificationLevel == "0" && indicators.A == "初级" && indicators.B == "国家"){
                score += indicators.indicatorsScore;
            }else if (data.certificateLevel == "0" && data.certificationLevel == "1" && indicators.A == "初级" && indicators.B == "省市"){
                score += indicators.indicatorsScore;
            }else if (data.certificateLevel == "0" && data.certificationLevel == "2" && indicators.A == "初级" && indicators.B == "其他"){
                score += indicators.indicatorsScore;
            }else if (data.certificateLevel == "1" && data.certificationLevel == "0" && indicators.A == "中级" && indicators.B == "国家"){
                score += indicators.indicatorsScore;
            }else if (data.certificateLevel == "1" && data.certificationLevel == "1" && indicators.A == "中级" && indicators.B == "省市"){
                score += indicators.indicatorsScore;
            }else if (data.certificateLevel == "1" && data.certificationLevel == "2" && indicators.A == "中级" && indicators.B == "其他"){
                score += indicators.indicatorsScore;
            }else if (data.certificateLevel == "2" && data.certificationLevel == "0" && indicators.A == "高级" && indicators.B == "国家"){
                score += indicators.indicatorsScore;
            }else if (data.certificateLevel == "2" && data.certificationLevel == "1" && indicators.A == "高级" && indicators.B == "省市"){
                score += indicators.indicatorsScore;
            }else if (data.certificateLevel == "2" && data.certificationLevel == "2" && indicators.A == "高级" && indicators.B == "其他"){
                score += indicators.indicatorsScore;
            }
        } 
      }
      var creditMap = new Object();
      creditMap.empCardCode = empCardCode;
      creditMap.score = score;
      creditMapList.push(creditMap);
    }
  }
  return creditMapList;
}

//比较日期大小
function compareDate(date1, date2) {
    var date1 = new Date(date1);
    var date2 = new Date(date2);
    if (date1.getTime() > date2.getTime()) {
        return true;
    } else {
        return false;
    }
}

//获取当前系统日期（年-月-日）
function currentDate() {
    var d = new Date(), str = '';
    str += d.getFullYear(); //获取当前年份
    var month = d.getMonth() + 1;
    month = (month < 10 ? "0" + month : month);
    str += "-" + month; //获取当前月份（0——11）
    var date = d.getDate();
    date = (date < 10 ? "0" + date : date);
    str += "-" + date;
    return str;
}
```

> * 病患护理员证

```js
var indicatorsKey = "YLXX";
var dataKey = "BHHLmjwOam";
var dataType = "certificate";
var indicatorsList;
var dataList;

var creditMapList = calculateCredit(indicatorsList,dataList);
creditMapList = JSON.stringify(creditMapList);

function calculateCredit(indicatorsList,dataList) {
  var creditMapList = [];
  if (null != indicatorsList && null != dataList){
    var nowDate = currentDate();
    for(var i = 0; i < dataList.length; i++) {
      var data = dataList[i];
      var empCardCode = data.empCardCode;
      var score = 0;
      for(var j = 0; j < indicatorsList.length; j++) {
        if (compareDate(nowDate,data.effectiveStartDate) && compareDate(data.effectiveEndDate,nowDate)){
            var indicators = indicatorsList[j];
            if (data.certificateLevel == "0" && data.certificationLevel == "0" && indicators.A == "初级" && indicators.B == "国家"){
                score += indicators.indicatorsScore;
            }else if (data.certificateLevel == "0" && data.certificationLevel == "1" && indicators.A == "初级" && indicators.B == "省市"){
                score += indicators.indicatorsScore;
            }else if (data.certificateLevel == "0" && data.certificationLevel == "2" && indicators.A == "初级" && indicators.B == "其他"){
                score += indicators.indicatorsScore;
            }else if (data.certificateLevel == "1" && data.certificationLevel == "0" && indicators.A == "中级" && indicators.B == "国家"){
                score += indicators.indicatorsScore;
            }else if (data.certificateLevel == "1" && data.certificationLevel == "1" && indicators.A == "中级" && indicators.B == "省市"){
                score += indicators.indicatorsScore;
            }else if (data.certificateLevel == "1" && data.certificationLevel == "2" && indicators.A == "中级" && indicators.B == "其他"){
                score += indicators.indicatorsScore;
            }else if (data.certificateLevel == "2" && data.certificationLevel == "0" && indicators.A == "高级" && indicators.B == "国家"){
                score += indicators.indicatorsScore;
            }else if (data.certificateLevel == "2" && data.certificationLevel == "1" && indicators.A == "高级" && indicators.B == "省市"){
                score += indicators.indicatorsScore;
            }else if (data.certificateLevel == "2" && data.certificationLevel == "2" && indicators.A == "高级" && indicators.B == "其他"){
                score += indicators.indicatorsScore;
            }
        } 
      }
      var creditMap = new Object();
      creditMap.empCardCode = empCardCode;
      creditMap.score = score;
      creditMapList.push(creditMap);
    }
  }
  return creditMapList;
}

//比较日期大小
function compareDate(date1, date2) {
    var date1 = new Date(date1);
    var date2 = new Date(date2);
    if (date1.getTime() > date2.getTime()) {
        return true;
    } else {
        return false;
    }
}

//获取当前系统日期（年-月-日）
function currentDate() {
    var d = new Date(), str = '';
    str += d.getFullYear(); //获取当前年份
    var month = d.getMonth() + 1;
    month = (month < 10 ? "0" + month : month);
    str += "-" + month; //获取当前月份（0——11）
    var date = d.getDate();
    date = (date < 10 ? "0" + date : date);
    str += "-" + date;
    return str;
}
```

> * 养老护理证书

```js
var indicatorsKey = "YLZJSS2623";
var dataKey = "YLHLHZ34A5";
var dataType = "certificate";
var indicatorsList;
var dataList;

var creditMapList = calculateCredit(indicatorsList,dataList);
creditMapList = JSON.stringify(creditMapList);

function calculateCredit(indicatorsList,dataList) {
  var creditMapList = [];
  if (null != indicatorsList && null != dataList){
    var nowDate = currentDate();
    for(var i = 0; i < dataList.length; i++) {
      var data = dataList[i];
      var empCardCode = data.empCardCode;
      var score = 0;
      for(var j = 0; j < indicatorsList.length; j++) {
        if (compareDate(nowDate,data.effectiveStartDate) && compareDate(data.effectiveEndDate,nowDate)){
            var indicators = indicatorsList[j];
            if (data.certificateLevel == "0" && data.certificationLevel == "0" && indicators.A == "初级" && indicators.B == "国家"){
                score += indicators.indicatorsScore;
            }else if (data.certificateLevel == "0" && data.certificationLevel == "1" && indicators.A == "初级" && indicators.B == "省市"){
                score += indicators.indicatorsScore;
            }else if (data.certificateLevel == "0" && data.certificationLevel == "2" && indicators.A == "初级" && indicators.B == "其他"){
                score += indicators.indicatorsScore;
            }else if (data.certificateLevel == "1" && data.certificationLevel == "0" && indicators.A == "中级" && indicators.B == "国家"){
                score += indicators.indicatorsScore;
            }else if (data.certificateLevel == "1" && data.certificationLevel == "1" && indicators.A == "中级" && indicators.B == "省市"){
                score += indicators.indicatorsScore;
            }else if (data.certificateLevel == "1" && data.certificationLevel == "2" && indicators.A == "中级" && indicators.B == "其他"){
                score += indicators.indicatorsScore;
            }else if (data.certificateLevel == "2" && data.certificationLevel == "0" && indicators.A == "高级" && indicators.B == "国家"){
                score += indicators.indicatorsScore;
            }else if (data.certificateLevel == "2" && data.certificationLevel == "1" && indicators.A == "高级" && indicators.B == "省市"){
                score += indicators.indicatorsScore;
            }else if (data.certificateLevel == "2" && data.certificationLevel == "2" && indicators.A == "高级" && indicators.B == "其他"){
                score += indicators.indicatorsScore;
            }
        } 
      }
      var creditMap = new Object();
      creditMap.empCardCode = empCardCode;
      creditMap.score = score;
      creditMapList.push(creditMap);
    }
  }
  return creditMapList;
}

//比较日期大小
function compareDate(date1, date2) {
    var date1 = new Date(date1);
    var date2 = new Date(date2);
    if (date1.getTime() > date2.getTime()) {
        return true;
    } else {
        return false;
    }
}

//获取当前系统日期（年-月-日）
function currentDate() {
    var d = new Date(), str = '';
    str += d.getFullYear(); //获取当前年份
    var month = d.getMonth() + 1;
    month = (month < 10 ? "0" + month : month);
    str += "-" + month; //获取当前月份（0——11）
    var date = d.getDate();
    date = (date < 10 ? "0" + date : date);
    str += "-" + date;
    return str;
}
```

> * 健康证

```js
var indicatorsKey = "JKZs0k6nVB";
var dataKey = "JKZE2EHPpX";
var dataType = "healthy";
var indicatorsList;
var dataList;

var creditMapList = calculateCredit(indicatorsList,dataList);
creditMapList = JSON.stringify(creditMapList);

function calculateCredit(indicatorsList,dataList) {
  var creditMapList = [];
  if (null != indicatorsList && null != dataList){
    var nowDate = currentDate();
    for(var i = 0; i < dataList.length; i++) {
      var data = dataList[i];
      var empCardCode = data.empCardCode;
      var score = 0;
      for(var j = 0; j < indicatorsList.length; j++) {
        if (compareDate(nowDate,data.effectiveStartDate) && compareDate(data.effectiveEndDate,nowDate)){
            var indicators = indicatorsList[j];
            if (data.checked == "1" && indicators.A == "有健康证，指定体检机构"){
                score += indicators.indicatorsScore;
            }else if (data.checked == "0" && indicators.A == "有健康证，非指定体检机构"){
                score += indicators.indicatorsScore;
            } 
        } 
      }
      var creditMap = new Object();
      creditMap.empCardCode = empCardCode;
      creditMap.score = score;
      creditMapList.push(creditMap);
    }
  }
  return creditMapList;
}

//比较日期大小
function compareDate(date1, date2) {
    var date1 = new Date(date1);
    var date2 = new Date(date2);
    if (date1.getTime() > date2.getTime()) {
        return true;
    } else {
        return false;
    }
}

//获取当前系统日期（年-月-日）
function currentDate() {
    var d = new Date(), str = '';
    str += d.getFullYear(); //获取当前年份
    var month = d.getMonth() + 1;
    month = (month < 10 ? "0" + month : month);
    str += "-" + month; //获取当前月份（0——11）
    var date = d.getDate();
    date = (date < 10 ? "0" + date : date);
    str += "-" + date;
    return str;
}
```

> * 体检报告

```js
var indicatorsKey = "TJBG9bvz8z";
var dataKey = "TJBGBj6fpy";
var dataType = "healthy";
var indicatorsList;
var dataList;

var creditMapList = calculateCredit(indicatorsList,dataList);
creditMapList = JSON.stringify(creditMapList);

function calculateCredit(indicatorsList,dataList) {
  var creditMapList = [];
  if (null != indicatorsList && null != dataList){
    var nowDate = currentDate();
    for(var i = 0; i < dataList.length; i++) {
      var data = dataList[i];
      var empCardCode = data.empCardCode;
      var score = 0;
      for(var j = 0; j < indicatorsList.length; j++) {
        if (compareDate(nowDate,data.effectiveStartDate) && compareDate(data.effectiveEndDate,nowDate)){
            var indicators = indicatorsList[j];
            if (data.checked == "1" && indicators.A == "有体检证明，指定体检机构"){
                score += indicators.indicatorsScore;
            }else if (data.checked == "0" && indicators.A == "有体检证明，非指定体检机构"){
                score += indicators.indicatorsScore;
            } 
        } 
      }
      var creditMap = new Object();
      creditMap.empCardCode = empCardCode;
      creditMap.score = score;
      creditMapList.push(creditMap);
    }
  }
  return creditMapList;
}

//比较日期大小
function compareDate(date1, date2) {
    var date1 = new Date(date1);
    var date2 = new Date(date2);
    if (date1.getTime() > date2.getTime()) {
        return true;
    } else {
        return false;
    }
}

//获取当前系统日期（年-月-日）
function currentDate() {
    var d = new Date(), str = '';
    str += d.getFullYear(); //获取当前年份
    var month = d.getMonth() + 1;
    month = (month < 10 ? "0" + month : month);
    str += "-" + month; //获取当前月份（0——11）
    var date = d.getDate();
    date = (date < 10 ? "0" + date : date);
    str += "-" + date;
    return str;
}
```

> * 保险信息

```js
var indicatorsKey = "BXXXwJobYu";
var dataKey = "TJBGBj6fpy";
var dataType = "healthy";
var indicatorsList;
var dataList;

var creditMapList = calculateCredit(indicatorsList,dataList);
creditMapList = JSON.stringify(creditMapList);

function calculateCredit(indicatorsList,dataList) {
  var creditMapList = [];
  if (null != indicatorsList && null != dataList){
    var nowDate = currentDate();
    for(var i = 0; i < dataList.length; i++) {
      var data = dataList[i];
      var empCardCode = data.empCardCode;
      var score = 0;
      for(var j = 0; j < indicatorsList.length; j++) {
        if (compareDate(nowDate,data.effectiveStartDate) && compareDate(data.effectiveEndDate,nowDate)){
            var indicators = indicatorsList[j];
            if (data.checked == "1" && indicators.A == "有体检证明，指定体检机构"){
                score += indicators.indicatorsScore;
            }else if (data.checked == "0" && indicators.A == "有体检证明，非指定体检机构"){
                score += indicators.indicatorsScore;
            } 
        } 
      }
      var creditMap = new Object();
      creditMap.empCardCode = empCardCode;
      creditMap.score = score;
      creditMapList.push(creditMap);
    }
  }
  return creditMapList;
}

//比较日期大小
function compareDate(date1, date2) {
    var date1 = new Date(date1);
    var date2 = new Date(date2);
    if (date1.getTime() > date2.getTime()) {
        return true;
    } else {
        return false;
    }
}

//获取当前系统日期（年-月-日）
function currentDate() {
    var d = new Date(), str = '';
    str += d.getFullYear(); //获取当前年份
    var month = d.getMonth() + 1;
    month = (month < 10 ? "0" + month : month);
    str += "-" + month; //获取当前月份（0——11）
    var date = d.getDate();
    date = (date < 10 ? "0" + date : date);
    str += "-" + date;
    return str;
}
```