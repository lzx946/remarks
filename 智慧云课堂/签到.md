### 活动表添加详细地址字段

```sql
ALTER TABLE `train`.activity MODIFY COLUMN `address` varchar(155) DEFAULT NULL COMMENT '活动地点';
ALTER TABLE `train`.activity ADD COLUMN `latitude` varchar(30) DEFAULT NULL COMMENT '纬度' AFTER `address`;
ALTER TABLE `train`.activity ADD COLUMN `longitude` varchar(30) DEFAULT NULL COMMENT '经度' AFTER `address`;
ALTER TABLE `train`.activity ADD COLUMN `detail_addr` varchar(55) DEFAULT NULL COMMENT '存储居住小区（不含小区）的具体信息（如：11幢11单元101室）' AFTER `address`;
ALTER TABLE `train`.activity ADD COLUMN `area_name` varchar(55) DEFAULT NULL COMMENT '小区或小区道路（如：同仁家园）' AFTER `address`;
ALTER TABLE `train`.activity ADD COLUMN `district` varchar(15) DEFAULT NULL COMMENT '区县' AFTER `address`;
ALTER TABLE `train`.activity ADD COLUMN `city` varchar(15) DEFAULT NULL COMMENT '市' AFTER `address`;
ALTER TABLE `train`.activity ADD COLUMN `province` varchar(15) DEFAULT NULL COMMENT '省' AFTER `address`;
```

### 创建活动管理员表

```sql
CREATE TABLE `train`.`activity_manager` (
  `id` varchar(20) NOT NULL COMMENT '活动管理员表id',
  `activity_id` varchar(20) NOT NULL COMMENT '活动id',
  `member_id` varchar(20) NOT NULL COMMENT '会员id',
  `del_flag` varchar(1) NOT NULL DEFAULT '1' COMMENT '逻辑删除用（置0）',
  `create_date` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  `create_id` varchar(20) DEFAULT NULL COMMENT '创建人ID',
  `modify_date` timestamp NULL DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP COMMENT '修改时间',
  `modify_id` varchar(20) DEFAULT NULL COMMENT '修改人ID',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='活动管理员表';
```

### 创建扫码签到校验表

```sql
CREATE TABLE `train`.`scan_check` (
  `check_id` varchar(20) NOT NULL COMMENT '校验id',
  `check_type` varchar(20) NOT NULL COMMENT '校验类型（对应CheckTypeEnum类）',
  `check_id_status` varchar(20) NOT NULL COMMENT '校验ID状态（对应CheckIdStatusEnum类）',
  `activity_id` varchar(20) NOT NULL COMMENT '活动id',
  `object_id` varchar(20) NOT NULL COMMENT '校验人id',
  `del_flag` varchar(1) NOT NULL DEFAULT '1' COMMENT '逻辑删除用（置0）',
  `create_date` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  `create_id` varchar(20) DEFAULT NULL COMMENT '创建人ID',
  `modify_date` timestamp NULL DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP COMMENT '修改时间',
  `modify_id` varchar(20) DEFAULT NULL COMMENT '修改人ID',
  PRIMARY KEY (`check_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='扫码签到校验表';
```

### 修改报名表

```sql
ALTER TABLE `train`.application MODIFY COLUMN `apply_time` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '报名时间';
ALTER TABLE `train`.application ADD COLUMN `confirm_time` TIMESTAMP NULL DEFAULT NULL COMMENT '签到时间';
ALTER TABLE `train`.application ADD COLUMN `create_time` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间';
ALTER TABLE `train`.application ADD COLUMN `modify_time` TIMESTAMP NULL DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP COMMENT '修改时间';

ALTER TABLE `train`.application ADD COLUMN `confirm_type` VARCHAR(20) DEFAULT NULL COMMENT '签到方式' AFTER `confirm`;

UPDATE `train`.application SET confirm_type = 'admin_click' WHERE confirm = '1' AND is_cancel = '0';

```

### 修改活动表

```sql
ALTER TABLE `train`.activity ADD COLUMN `expand` varchar(1000) DEFAULT NULL COMMENT '不同活动形式的拓展字段';
```

### 创建扫码签到校验日志表

```sql
CREATE TABLE `train`.`scan_check_log` (
  `log_id` varchar(20) NOT NULL COMMENT '校验日志id',
  `qr_code_check_id` varchar(20) NOT NULL COMMENT '二维码校验流水号',
  `scan_check_id` varchar(20) NOT NULL COMMENT '扫码校验流水号',
  `del_flag` varchar(1) NOT NULL DEFAULT '1' COMMENT '逻辑删除用（置0）',
  `create_date` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  `create_id` varchar(20) DEFAULT NULL COMMENT '创建人ID',
  `modify_date` timestamp NULL DEFAULT NULL ON UPDATE CURRENT_TIMESTAMP COMMENT '修改时间',
  `modify_id` varchar(20) DEFAULT NULL COMMENT '修改人ID',
  PRIMARY KEY (`log_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='扫码签到校验日志表';
```

### 添加主键

```sql
ALTER TABLE `train`.application ADD PRIMARY KEY (`id`);
ALTER TABLE `train`.check_form ADD PRIMARY KEY (`id`);
ALTER TABLE `train`.credit ADD PRIMARY KEY (`id`);
ALTER TABLE `train`.give_like ADD PRIMARY KEY (`id`);
ALTER TABLE `train`.history_credit ADD PRIMARY KEY (`id`);
ALTER TABLE `train`.tag ADD PRIMARY KEY (`id`);
```

### 日志表

```sql
CREATE TABLE `train`.`operation_log` (
  `id` int(8) NOT NULL AUTO_INCREMENT COMMENT '记录ID',
	`operation_type` varchar(20) NOT NULL COMMENT '操作类型（对应OperationTypeEnum）',
  `activity_id` varchar(20) NOT NULL COMMENT '活动id',
  `user_name` varchar(50) DEFAULT NULL COMMENT '操作人姓名',
  `user_id` varchar(20) DEFAULT NULL COMMENT '操作人工号',
	`user_type` varchar(20) DEFAULT NULL COMMENT '操作人类型',
  `create_date` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '操作时间',
  `log_method` varchar(60) DEFAULT NULL COMMENT '操作方式',
  `detail` varchar(1000) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='活动操作日志';
```